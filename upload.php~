<?php



if($_SERVER['REQUEST_METHOD'] == "POST" && isset($_FILES["userImage"]["type"])){
	$msg = '';
	$uploaded = FALSE;
	$extensions = array("jpeg", "jpg", "png");
	$fileTypes = array("image/png","image/jpg","image/jpeg");
	$file = $_FILES["userImage"];
	$file_extension = strtolower(end(explode(".", $file["name"])));
	$target_Algorithim = $_POST['Point_to_Point'];
	$target_valueC = $_POST['ccons'];
	$target_valueB = $_POST['bcons'];
	if (in_array($file["type"],$fileTypes) && in_array($file_extension, $extensions)) {
		if ($file["error"] > 0)
		{
			$msg = 'Error Code: ' . $file["error"];
		}
		else
		{
			if (file_exists("upload/" . $file["name"])) {
				$msg = $file["name"].' ya existe.';				
			}
			else
			{
				$sourcePath = $file['tmp_name'];
				$targetPath = 'uploads/'.$file['name'];
				move_uploaded_file($sourcePath,$targetPath);
				$msg = 'Image Subida .....!!';
				$uploaded = TRUE;
			}
		}
	}
	else
	{
		$msg = '***archivo invalido***';
	}
	echo ($uploaded ? $msg : '<span class="msg-error">'.$msg.'</span>');

	$exe = "C:\\xampp\\htdocs\\proccess\\".$target_Algorithim.".py";
	$dir_file = "C:\\xampp\\htdocs\\proccess\\" . $targetPath;

	echo '<br>',$exe, '<br>';
	echo $dir_file, '<br>';
	
	$message = shell_exec("G:\\Anaconda\\python '$exe' '$dir_file'");
		$message = shell_exec("G:\\Anaconda\\python  G:\\codigos\\exponential.py 'C:\\xampp\\htdocs\\proccess\\uploads\\Captura de pantalla (1).png' 20 1.005");
	echo "<pre>$message</pre>";
	print_r($message);

	echo '<img src="'.$message.'">';
}

die();
?>